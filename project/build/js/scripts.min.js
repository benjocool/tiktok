"use strict";const lazyImages=document.querySelectorAll("img[data-src],source[data-srcset]"),windowHeight=document.documentElement.clientHeight,loadMoreBlock=document.querySelector("._load-more");let lazyImagesPositions=[];function lazyScroll(){document.querySelectorAll("img[data-src],source[data-srcset]").length>0&&lazyScrollCheck(),loadMoreBlock.classList.contains("_loading")||loadMore()}function lazyScrollCheck(){let e=lazyImagesPositions.findIndex((e=>pageYOffset>e-windowHeight));e>=0&&(lazyImages[e].dataset.src?(lazyImages[e].src=lazyImages[e].dataset.src,lazyImages[e].removeAttribute("data-src")):lazyImages[e].dataset.srcset&&(lazyImages[e].srcset=lazyImages[e].dataset.srcset,lazyImages[e].removeAttribute("data-srcset")),delete lazyImagesPositions[e])}function loadMore(){const e=loadMoreBlock.getBoundingClientRect().top+pageYOffset,t=loadMoreBlock.offsetHeight;pageYOffset>e+t-windowHeight&&getContent()}async function getContent(){document.querySelector("._loading-icon")||loadMoreBlock.insertAdjacentHTML("beforeend",'<div class="_loading-icon"></div>'),loadMoreBlock.classList.add("_loading");let e=await fetch("_more.html",{method:"GET"});if(e.ok){let t=await e.text();loadMoreBlock.insertAdjacentHTML("beforeend",t),loadMoreBlock.classList.remove("_loading"),document.querySelector("._loading-icon")&&document.querySelector("._loading-icon").remove()}else alert("Ошибка")}lazyImages.length>0&&lazyImages.forEach((e=>{(e.dataset.src||e.dataset.srcset)&&(lazyImagesPositions.push(e.getBoundingClientRect().top+pageYOffset),lazyScrollCheck())})),window.addEventListener("scroll",lazyScroll);var modal=document.getElementById("modal"),btn=document.getElementById("btn");btn.onclick=function(){modal.style.display="none"};